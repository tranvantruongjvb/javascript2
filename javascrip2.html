<!DOCTYPE html>
<html>
<head>
    <title>Bảng lương </title>
    <meta charset="utf-8">
    <style>
        form{
        margin: 20px 0;
    }
    form input, button{
        padding: 5px;
    }
    table{
        width: 100%;
        margin-bottom: 20px;
        border-collapse: inherit;
    }
    table, th, td{
        border: 1px solid #cdcdcd;
    }
    table th, table td{
        padding: 10px;
        text-align: left;

    }

    </style>
</head>
<body>
    <h3 align="center">Bảng</h3>
    <form>
    <table id="table1">
        <thead>
            <tr>
                <th>Thời gian</th>
                <th>tên </th>
                <th >đơn giá </th>
                <th  colspan="2">số lượng</th>
                <th colspan="2">số tiền </th>
                <th>ghi chú</th>
                <td><input type="button" class="add-row" onclick="addrow1(this)" value="+"></td>
              </tr>
        </thead>
        <tbody>
            <tr>
                <td></td>
                <td></td>
                <td><input type="text " class="key price" name="price" value="50"   ></td>
                <td><input type="text" class="key quan" name="quan" value="30" ></td>
                <td ><select>
                        <option>nghìn $</option> 
                        <option>nghìn $$</option>
                      </select>
                </td>
                <td><p type="text" class="key result" ></p></td>
                <td>    <input type="checkbox" class="key row-checkbox" ></td>
                <td>không có gì</td>
                <td><button type="button" class="add-row" onclick="addrow1(this)" >+</td>
                <td><button type="button" name="delete" class="delete-row" onclick="deleterow(this)">-</button></td> 
                </button>
                </td>
            </tr>
            <tr>
                <td>小計</td>
                <td><p class="key sum1"></p></td>
            </tr>
            <tr>
                <td>消費税 7,5 % =</td>
                <td><p class="key percent"> </p></td>
            </tr>
            <tr>
                <td>合計</td>
                <td><p class="key sum2"></p></td>
            </tr>
        </tbody>


    </table>

</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
            function addrow1(r) {
                 var i = r.parentNode.parentNode.rowIndex +1;

                document.getElementById("table1").insertRow(i).innerHTML ='<tr> <td></td>  <td></td>            <td><input type="text" class="key price" placeholder="Đơn giá" value="0"></td>                                                                              <td><input type="text" class="key quan" placeholder="số lượng"  value="0"></td>                                                                                          <td ><select><option>nghìn $</option> <option>nghìn $$</option></select></td>                                                                                                                   <td> <p class="key result" value=""></p></td>                                                                                          <td>    <input type="checkbox" class="row-checkbox"></td>                                     <td><input type="text" name="note"></td>                                                                                           <td> <button  type="button" onclick="addrow1(this)" >+</td>                                                                                                                                          <td><button type="button" onclick="deleterow(this)" name="delete" >-</td></tr>';
                    
                // body...
            };

            function deleterow(r) {
                    var i = r.parentNode.parentNode.rowIndex;
                     document.getElementById("myadd").deleteRow(i);
                     var id = i-1;
                    //alert('Bạn vừa xoá bỏ dòng' + i);
            };
    
            $(document).on('keyup', '.key', function () {
                 
                    var a = $(this).parents('tr').find('.price').val();
                    var b = $(this).parents('tr').find('.quan').val();
                    var result= $(this).parents('tr').find('.result').empty();
                    result= $(this).parents('tr').find('.result').append(a*b);
                    

                    //alert('result = ' + result.vaL());                 
            });
                
                 $(document).on('keyup', '.key', function () {
                var result1=$('.result');
                var per =$('.percent').val();
                var sum = parseFloat(0);
                for (i=0;i<result1.length;i++) {
                    sum=sum+parseFloat($(result1[i]).text());
                    //console.log(sum);
                    var sum11= $(this).parents('tbody').find('.sum1').empty();
                    sum11= $('.sum1').append(sum);

                    var per = sum11.text() * 0.075;
                    var percent1= $('.percent').empty();
                    percent1= $('.percent').append(per);


                    var sum22 = sum + per;
                    var sum222= $('.sum2').empty();
                    sum222= $('.sum2').append(sum22);
                };
            });
          
             
</script>
</body>
</html>
















